<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<title>База с добытчиками</title>
<style>
  body {
    margin: 0; padding: 0;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: linear-gradient(135deg, #a1c4fd, #c2e9fb);
    user-select: none;
  }
  #game {
    max-width: 720px;
    margin: 15px auto;
    background: #e3f2fd;
    border-radius: 12px;
    box-shadow: 0 0 15px rgba(0,0,0,0.2);
    padding: 15px;
  }
  #resources {
    display: flex;
    justify-content: space-around;
    font-weight: 700;
    font-size: 18px;
    margin-bottom: 10px;
  }
  #build-buttons {
    text-align: center;
    margin-bottom: 10px;
  }
  #build-buttons button {
    background: #4caf50;
    border: none;
    padding: 10px 15px;
    margin: 0 8px;
    border-radius: 8px;
    font-weight: 600;
    color: white;
    cursor: pointer;
    transition: background 0.3s ease;
  }
  #build-buttons button:hover {
    background: #388e3c;
  }
  #map {
    display: grid;
    grid-template-columns: repeat(12, 56px);
    grid-template-rows: repeat(8, 56px);
    gap: 6px;
    justify-content: center;
    background: #81c784;
    border-radius: 15px;
    padding: 8px;
  }
  .cell {
    background: linear-gradient(145deg, #a8d5a3, #70b860);
    border-radius: 12px;
    box-shadow: inset 3px 3px 7px #599d3e,
                inset -3px -3px 5px #9dd47f;
    cursor: pointer;
    transition: transform 0.15s ease;
    position: relative;
  }
  .cell:hover {
    transform: scale(1.05);
    box-shadow: 0 0 12px #70b860;
  }
  .building {
    position: absolute;
    top: 50%; left: 50%;
    transform: translate(-50%, -50%);
    width: 40px;
    height: 40px;
    border-radius: 50%;
    color: white;
    font-weight: 700;
    font-size: 14px;
    display: flex;
    align-items: center;
    justify-content: center;
    text-shadow: 0 0 5px rgba(0,0,0,0.6);
    box-shadow: 0 4px 8px rgba(0,0,0,0.2);
  }
  .gold-miner {
    background: linear-gradient(145deg, #ffd54f, #ffb300);
    border: 2px solid #ffca28;
  }
  .oil-rig {
    background: linear-gradient(145deg, #64b5f6, #1976d2);
    border: 2px solid #42a5f5;
  }
  #info {
    margin-top: 12px;
    text-align: center;
    font-weight: 600;
    min-height: 24px;
  }
</style>
</head>
<body>

<div id="game">
  <div id="resources">
    <div>Золото: <span id="gold">0</span></div>
    <div>Нефть: <span id="oil">0</span></div>
  </div>
  <div id="build-buttons">
    <button data-building="gold-miner">Добытчик золота (стоимость 10 золота)</button>
    <button data-building="oil-rig">Нефтяная вышка (стоимость 15 золота)</button>
  </div>
  <div id="map"></div>
  <div id="info">Выберите постройку для строительства</div>
</div>

<script>
  const mapWidth = 12;
  const mapHeight = 8;
  const map = document.getElementById('map');
  const goldSpan = document.getElementById('gold');
  const oilSpan = document.getElementById('oil');
  const info = document.getElementById('info');

  let gold = 0;
  let oil = 0;
  let selectedBuilding = null;

  // Стоимость построек (в золоте)
  const costs = {
    'gold-miner': 10,
    'oil-rig': 15,
  };

  // Создаем сетку карты
  for(let y=0; y < mapHeight; y++){
    for(let x=0; x < mapWidth; x++){
      const cell = document.createElement('div');
      cell.classList.add('cell');
      cell.dataset.x = x;
      cell.dataset.y = y;
      map.appendChild(cell);
    }
  }

  // Обработка выбора постройки
  document.getElementById('build-buttons').addEventListener('click', e => {
    if(e.target.tagName !== 'BUTTON') return;
    selectedBuilding = e.target.dataset.building;
    info.textContent = `Вы выбрали: ${selectedBuilding}. Кликните на клетку для строительства.`;
  });

  // Строительство по клику на клетку
  map.addEventListener('click', e => {
    if(!selectedBuilding){
      info.textContent = "Сначала выберите постройку для строительства.";
      return;
    }
    if(!e.target.classList.contains('cell')) return;

    const cell = e.target;

    if(cell.querySelector('.building')){
      info.textContent = "На этой клетке уже есть постройка!";
      return;
    }

    // Проверка стоимости
    if(gold < costs[selectedBuilding]){
      info.textContent = "Недостаточно золота!";
      return;
    }

    gold -= costs[selectedBuilding];
    goldSpan.textContent = gold;

    // Создаем элемент постройки
    const buildingDiv = document.createElement('div');
    buildingDiv.classList.add('building', selectedBuilding);

    if(selectedBuilding === 'gold-miner'){
      buildingDiv.textContent = 'Золото';
    } else if(selectedBuilding === 'oil-rig'){
      buildingDiv.textContent = 'Нефть';
    }

    cell.appendChild(buildingDiv);

    info.textContent = `${selectedBuilding === 'gold-miner' ? 'Добытчик золота' : 'Нефтяная вышка'} построена!`;

    selectedBuilding = null;
  });

  // Добыча ресурсов каждые 1 секунду
  setInterval(() => {
    const goldMiners = document.querySelectorAll('.gold-miner').length;
    const oilRigs = document.querySelectorAll('.oil-rig').length;

    gold += goldMiners * 1; // 1 золото в секунду с каждого добытчика
    oil += oilRigs * 1;     // 1 нефть в секунду с каждой вышки

    goldSpan.textContent = gold;
    oilSpan.textContent = oil;

    info.textContent = `Добыча: +${goldMiners} золота, +${oilRigs} нефти в секунду`;
  }, 1000);

</script>

</body>
</html>
