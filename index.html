<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<title>Mini Clash Clone</title>
<style>
  body {
    font-family: Arial, sans-serif;
    background: #d0f0d0;
    margin: 0;
    padding: 0;
    user-select: none;
  }
  #game {
    width: 600px;
    margin: 20px auto;
  }
  #map {
    display: grid;
    grid-template-columns: repeat(10, 50px);
    grid-template-rows: repeat(10, 50px);
    gap: 2px;
    background: #7bb56f;
    border: 2px solid #4a6f3e;
  }
  .cell {
    width: 50px; height: 50px;
    background: #a2d88f;
    border: 1px solid #588238;
    cursor: pointer;
    position: relative;
  }
  .building {
    width: 46px; height: 46px;
    background-color: #d9b44a;
    border-radius: 6px;
    margin: 2px auto;
    box-shadow: inset 0 0 8px #cda83e;
  }
  .building.barracks {
    background-color: #6a9dff;
    box-shadow: inset 0 0 8px #3e72cd;
  }
  #info {
    margin-top: 15px;
  }
  #resources {
    font-weight: bold;
    margin-bottom: 10px;
  }
  #build-buttons button {
    margin-right: 10px;
    padding: 5px 10px;
    cursor: pointer;
  }
</style>
</head>
<body>

<div id="game">
  <div id="resources">
    Золото: <span id="gold">100</span> | Нефть: <span id="oil">50</span>
  </div>
  <div id="build-buttons">
    <button data-building="house">Построить Дом (20 золота)</button>
    <button data-building="barracks">Построить Казармы (50 золота)</button>
  </div>
  <div id="map"></div>
  <div id="info">Выберите клетку и постройте здание</div>
</div>

<script>
  const mapSize = 10;
  const map = document.getElementById('map');
  const goldSpan = document.getElementById('gold');
  const oilSpan = document.getElementById('oil');
  const info = document.getElementById('info');
  let gold = 100;
  let oil = 50;
  let selectedBuilding = null;

  // Строимости зданий
  const costs = {
    house: { gold: 20, oil: 0 },
    barracks: { gold: 50, oil: 0 }
  };

  // Создаем карту
  for(let i=0; i < mapSize * mapSize; i++){
    const cell = document.createElement('div');
    cell.classList.add('cell');
    cell.dataset.index = i;
    map.appendChild(cell);
  }

  // Обработка выбора здания
  document.getElementById('build-buttons').addEventListener('click', e => {
    if(e.target.tagName === 'BUTTON'){
      const bld = e.target.dataset.building;
      if(costs[bld]){
        selectedBuilding = bld;
        info.textContent = `Выбран ${bld}. Кликните по клетке для постройки.`;
      }
    }
  });

  // Обработка клика по клетке карты
  map.addEventListener('click', e => {
    if(!selectedBuilding) {
      info.textContent = "Сначала выберите здание для постройки";
      return;
    }
    if(!e.target.classList.contains('cell')) return;

    const cell = e.target;

    // Проверка, что клетка пустая
    if(cell.querySelector('.building')){
      info.textContent = "На этой клетке уже есть здание!";
      return;
    }

    // Проверяем ресурсы
    if(gold < costs[selectedBuilding].gold){
      info.textContent = "Недостаточно золота!";
      return;
    }

    // Строим здание
    gold -= costs[selectedBuilding].gold;
    goldSpan.textContent = gold;

    const buildingDiv = document.createElement('div');
    buildingDiv.classList.add('building');
    if(selectedBuilding === 'barracks'){
      buildingDiv.classList.add('barracks');
    }
    cell.appendChild(buildingDiv);

    info.textContent = `${selectedBuilding} построен! Выберите следующее здание.`;
    selectedBuilding = null;
  });
</script>

</body>
</html>
